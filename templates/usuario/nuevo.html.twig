{% extends 'base.html.twig' %}

{% block title %}{{ titulo }}{% endblock %}

{% block body %}
    <h1 class="display-5 mb-4">{{ titulo }}</h1>
    <div class="card p-4">
        {{ form_start(form) }}
            {{ form_row(form.email) }}
            {{ form_row(form.password) }}
            {% if errores.password is defined %}
                <div class="text-danger small">{{ errores.password }}</div>
            {% endif %}
            {{ form_row(form.nombre) }}
            {% if errores.nombre is defined %}
                <div class="text-danger small">{{ errores.nombre }}</div>
            {% endif %}
            {{ form_row(form.apellido1) }}
            {% if errores.apellido1 is defined %}
                <div class="text-danger small">{{ errores.apellido1 }}</div>
            {% endif %}
            {{ form_row(form.apellido2) }}
            {% if errores.apellido2 is defined %}
                <div class="text-danger small">{{ errores.apellido2 }}</div>
            {% endif %}
            {{ form_row(form.tipo) }}
            {% if errores.alumno is defined %}
                <div class="text-danger small">{{ errores.alumno }}</div>
            {% endif %}
            {% if errores.profesor is defined %}
                <div class="text-danger small">{{ errores.profesor }}</div>
            {% endif %}
            {% if errores.tipo is defined %}
                <div class="text-danger small">{{ errores.tipo }}</div>
            {% endif %}

            <div id="alumno-fields" style="display:none;">
                <div class="mb-3">
                    <label for="fechaNacimiento" class="form-label">Fecha de nacimiento</label>
                    <input type="date" id="fechaNacimiento" name="fechaNacimiento" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="peso" class="form-label">Peso (kg)</label>
                    <input type="number" id="peso" name="peso" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="altura" class="form-label">Altura (cm)</label>
                    <input type="number" id="altura" name="altura" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="sexo" class="form-label">Sexo</label>
                    <select id="sexo" name="sexo" class="form-select">
                        <option value="">Selecciona...</option>
                        <option value="masculino">Masculino</option>
                        <option value="femenino">Femenino</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
            </div>
            <div id="profesor-fields" style="display:none;">
                <div class="mb-3">
                    <label for="especialidad" class="form-label">Especialidad</label>
                    <input type="text" id="especialidad" name="especialidad" class="form-control">
                </div>
            </div>
            <div id="admin-fields" style="display:none;">
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="activo" name="activo">
                    <label class="form-check-label" for="activo">Administrador activo</label>
                </div>
            </div>

            {{ form_row(form.guardar) }}
        {{ form_end(form) }}
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tipoSelect = document.querySelector('#form_tipo');
            const alumnoFields = document.getElementById('alumno-fields');
            const profesorFields = document.getElementById('profesor-fields');
            const adminFields = document.getElementById('admin-fields');

            function mostrarCampos() {
                alumnoFields.style.display = 'none';
                profesorFields.style.display = 'none';
                adminFields.style.display = 'none';

                if (tipoSelect.value === 'alumno') {
                    alumnoFields.style.display = 'block';
                } else if (tipoSelect.value === 'profesor') {
                    profesorFields.style.display = 'block';
                } else if (tipoSelect.value === 'administrador') {
                    adminFields.style.display = 'block';
                }
            }

            tipoSelect.addEventListener('change', mostrarCampos);
            mostrarCampos();
        });
    </script>
{% endblock %}